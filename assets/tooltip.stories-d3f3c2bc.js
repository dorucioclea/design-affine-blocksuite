import{j as h}from"./jsx-runtime-ffb262ed.js";import{i as ee}from"./vanilla-extract-dynamic.esm-22503a8d.js";import"./button-d66800f5.js";import{I as te}from"./icon-button-5fa0e7e0.js";import{d as L,c as q,b as X,$ as ne,_ as y,a as oe,e as re}from"./index-44efca5e.js";import{r}from"./index-76fb7be0.js";import{$ as J,a as ae,b as ce,c as se,d as T,e as ie,f as le,g as ue,h as de,i as fe}from"./index-9447baff.js";import{r as pe}from"./index-d3ea75b5.js";import"./_commonjsHelpers-de833af9.js";import"./clsx-1229b3e0.js";import"./style.css-a730969a.js";function $e(e,n){return r.useReducer((t,o)=>{const a=n[t][o];return a??t},e)}const k=e=>{const{present:n,children:t}=e,o=me(n),a=typeof t=="function"?t({present:o.isPresent}):r.Children.only(t),c=L(o.ref,a.ref);return typeof t=="function"||o.isPresent?r.cloneElement(a,{ref:c}):null};k.displayName="Presence";function me(e){const[n,t]=r.useState(),o=r.useRef({}),a=r.useRef(e),c=r.useRef("none"),l=e?"mounted":"unmounted",[f,s]=$e(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const i=A(o.current);c.current=f==="mounted"?i:"none"},[f]),q(()=>{const i=o.current,u=a.current;if(u!==e){const $=c.current,p=A(i);e?s("MOUNT"):p==="none"||(i==null?void 0:i.display)==="none"?s("UNMOUNT"):s(u&&$!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,s]),q(()=>{if(n){const i=d=>{const p=A(o.current).includes(d.animationName);d.target===n&&p&&pe.flushSync(()=>s("ANIMATION_END"))},u=d=>{d.target===n&&(c.current=A(o.current))};return n.addEventListener("animationstart",u),n.addEventListener("animationcancel",i),n.addEventListener("animationend",i),()=>{n.removeEventListener("animationstart",u),n.removeEventListener("animationcancel",i),n.removeEventListener("animationend",i)}}else s("ANIMATION_END")},[n,s]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:r.useCallback(i=>{i&&(o.current=getComputedStyle(i)),t(i)},[])}}function A(e){return(e==null?void 0:e.animationName)||"none"}function ve({prop:e,defaultProp:n,onChange:t=()=>{}}){const[o,a]=he({defaultProp:n,onChange:t}),c=e!==void 0,l=c?e:o,f=X(t),s=r.useCallback(i=>{if(c){const d=typeof i=="function"?i(e):i;d!==e&&f(d)}else a(i)},[c,e,a,f]);return[l,s]}function he({defaultProp:e,onChange:n}){const t=r.useState(e),[o]=t,a=r.useRef(o),c=X(n);return r.useEffect(()=>{a.current!==o&&(c(o),a.current=o)},[o,a,c]),t}const[D,rt]=ne("Tooltip",[J]),I=J(),be="TooltipProvider",xe=700,M="tooltip.open",[ge,S]=D(be),ye=e=>{const{__scopeTooltip:n,delayDuration:t=xe,skipDelayDuration:o=300,disableHoverableContent:a=!1,children:c}=e,[l,f]=r.useState(!0),s=r.useRef(!1),i=r.useRef(0);return r.useEffect(()=>{const u=i.current;return()=>window.clearTimeout(u)},[]),r.createElement(ge,{scope:n,isOpenDelayed:l,delayDuration:t,onOpen:r.useCallback(()=>{window.clearTimeout(i.current),f(!1)},[]),onClose:r.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(()=>f(!0),o)},[o]),isPointerInTransitRef:s,onPointerInTransitChange:r.useCallback(u=>{s.current=u},[]),disableHoverableContent:a},c)},H="Tooltip",[Te,N]=D(H),Ce=e=>{const{__scopeTooltip:n,children:t,open:o,defaultOpen:a=!1,onOpenChange:c,disableHoverableContent:l,delayDuration:f}=e,s=S(H,e.__scopeTooltip),i=I(n),[u,d]=r.useState(null),$=ae(),p=r.useRef(0),m=l??s.disableHoverableContent,b=f??s.delayDuration,v=r.useRef(!1),[g=!1,x]=ve({prop:o,defaultProp:a,onChange:U=>{U?(s.onOpen(),document.dispatchEvent(new CustomEvent(M))):s.onClose(),c==null||c(U)}}),C=r.useMemo(()=>g?v.current?"delayed-open":"instant-open":"closed",[g]),E=r.useCallback(()=>{window.clearTimeout(p.current),v.current=!1,x(!0)},[x]),_=r.useCallback(()=>{window.clearTimeout(p.current),x(!1)},[x]),j=r.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,x(!0)},b)},[b,x]);return r.useEffect(()=>()=>window.clearTimeout(p.current),[]),r.createElement(ce,i,r.createElement(Te,{scope:n,contentId:$,open:g,stateAttribute:C,trigger:u,onTriggerChange:d,onTriggerEnter:r.useCallback(()=>{s.isOpenDelayed?j():E()},[s.isOpenDelayed,j,E]),onTriggerLeave:r.useCallback(()=>{m?_():window.clearTimeout(p.current)},[_,m]),onOpen:E,onClose:_,disableHoverableContent:m},t))},G="TooltipTrigger",Ee=r.forwardRef((e,n)=>{const{__scopeTooltip:t,...o}=e,a=N(G,t),c=S(G,t),l=I(t),f=r.useRef(null),s=L(n,f,a.onTriggerChange),i=r.useRef(!1),u=r.useRef(!1),d=r.useCallback(()=>i.current=!1,[]);return r.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),r.createElement(se,y({asChild:!0},l),r.createElement(oe.button,y({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},o,{ref:s,onPointerMove:T(e.onPointerMove,$=>{$.pointerType!=="touch"&&!u.current&&!c.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:T(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:T(e.onPointerDown,()=>{i.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:T(e.onFocus,()=>{i.current||a.onOpen()}),onBlur:T(e.onBlur,a.onClose),onClick:T(e.onClick,a.onClose)})))}),W="TooltipPortal",[_e,we]=D(W,{forceMount:void 0}),Pe=e=>{const{__scopeTooltip:n,forceMount:t,children:o,container:a}=e,c=N(W,n);return r.createElement(_e,{scope:n,forceMount:t},r.createElement(k,{present:t||c.open},r.createElement(ie,{asChild:!0,container:a},o)))},O="TooltipContent",Oe=r.forwardRef((e,n)=>{const t=we(O,e.__scopeTooltip),{forceMount:o=t.forceMount,side:a="top",...c}=e,l=N(O,e.__scopeTooltip);return r.createElement(k,{present:o||l.open},l.disableHoverableContent?r.createElement(Q,y({side:a},c,{ref:n})):r.createElement(Ne,y({side:a},c,{ref:n})))}),Ne=r.forwardRef((e,n)=>{const t=N(O,e.__scopeTooltip),o=S(O,e.__scopeTooltip),a=r.useRef(null),c=L(n,a),[l,f]=r.useState(null),{trigger:s,onClose:i}=t,u=a.current,{onPointerInTransitChange:d}=o,$=r.useCallback(()=>{f(null),d(!1)},[d]),p=r.useCallback((m,b)=>{const v=m.currentTarget,g={x:m.clientX,y:m.clientY},x=Me(g,v.getBoundingClientRect()),C=Le(g,x),E=ke(b.getBoundingClientRect()),_=He([...C,...E]);f(_),d(!0)},[d]);return r.useEffect(()=>()=>$(),[$]),r.useEffect(()=>{if(s&&u){const m=v=>p(v,u),b=v=>p(v,s);return s.addEventListener("pointerleave",m),u.addEventListener("pointerleave",b),()=>{s.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",b)}}},[s,u,p,$]),r.useEffect(()=>{if(l){const m=b=>{const v=b.target,g={x:b.clientX,y:b.clientY},x=(s==null?void 0:s.contains(v))||(u==null?void 0:u.contains(v)),C=!Se(g,l);x?$():C&&($(),i())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[s,u,l,i,$]),r.createElement(Q,y({},e,{ref:c}))}),[Ae,Re]=D(H,{isInside:!1}),Q=r.forwardRef((e,n)=>{const{__scopeTooltip:t,children:o,"aria-label":a,onEscapeKeyDown:c,onPointerDownOutside:l,...f}=e,s=N(O,t),i=I(t),{onClose:u}=s;return r.useEffect(()=>(document.addEventListener(M,u),()=>document.removeEventListener(M,u)),[u]),r.useEffect(()=>{if(s.trigger){const d=$=>{const p=$.target;p!=null&&p.contains(s.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[s.trigger,u]),r.createElement(le,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d=>d.preventDefault(),onDismiss:u},r.createElement(ue,y({"data-state":s.stateAttribute},i,f,{ref:n,style:{...f.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),r.createElement(re,null,o),r.createElement(Ae,{scope:t,isInside:!0},r.createElement(de,{id:s.contentId,role:"tooltip"},a||o))))}),De="TooltipArrow",Ie=r.forwardRef((e,n)=>{const{__scopeTooltip:t,...o}=e,a=I(t);return Re(De,t).isInside?null:r.createElement(fe,y({},a,o,{ref:n}))});function Me(e,n){const t=Math.abs(n.top-e.y),o=Math.abs(n.bottom-e.y),a=Math.abs(n.right-e.x),c=Math.abs(n.left-e.x);switch(Math.min(t,o,a,c)){case c:return"left";case a:return"right";case t:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function Le(e,n,t=5){const o=[];switch(n){case"top":o.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":o.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":o.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":o.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t});break}return o}function ke(e){const{top:n,right:t,bottom:o,left:a}=e;return[{x:a,y:n},{x:t,y:n},{x:t,y:o},{x:a,y:o}]}function Se(e,n){const{x:t,y:o}=e;let a=!1;for(let c=0,l=n.length-1;c<n.length;l=c++){const f=n[c].x,s=n[c].y,i=n[l].x,u=n[l].y;s>o!=u>o&&t<(i-f)*(o-s)/(u-s)+f&&(a=!a)}return a}function He(e){const n=e.slice();return n.sort((t,o)=>t.x<o.x?-1:t.x>o.x?1:t.y<o.y?-1:t.y>o.y?1:0),je(n)}function je(e){if(e.length<=1)return e.slice();const n=[];for(let o=0;o<e.length;o++){const a=e[o];for(;n.length>=2;){const c=n[n.length-1],l=n[n.length-2];if((c.x-l.x)*(a.y-l.y)>=(c.y-l.y)*(a.x-l.x))n.pop();else break}n.push(a)}n.pop();const t=[];for(let o=e.length-1;o>=0;o--){const a=e[o];for(;t.length>=2;){const c=t[t.length-1],l=t[t.length-2];if((c.x-l.x)*(a.y-l.y)>=(c.y-l.y)*(a.x-l.x))t.pop();else break}t.push(a)}return t.pop(),n.length===1&&t.length===1&&n[0].x===t[0].x&&n[0].y===t[0].y?n:n.concat(t)}const Ue=ye,qe=Ce,Ge=Ee,Ve=Pe,Fe=Oe,Be=Ie;var Ye="la997z0";const R=({children:e,content:n,side:t="top",align:o="center",options:a,rootOptions:c,portalOptions:l})=>h.jsx(Ue,{children:h.jsxs(qe,{delayDuration:500,...c,children:[h.jsx(Ge,{asChild:!0,children:e}),h.jsx(Ve,{...l,children:h.jsxs(Fe,{className:Ye,side:t,align:o,sideOffset:5,...a,children:[n,h.jsx(Be,{height:6,width:10,fill:"var(--affine-tooltip)"})]})})]})});try{R.displayName="Tooltip",R.__docgenInfo={description:"",displayName:"Tooltip",props:{content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"ReactNode"}},side:{defaultValue:{value:"top"},description:"",name:"side",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'}]}},align:{defaultValue:{value:"center"},description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'},{value:'"center"'}]}},rootOptions:{defaultValue:null,description:"",name:"rootOptions",required:!1,type:{name:'Omit<TooltipProps, "children">'}},portalOptions:{defaultValue:null,description:"",name:"portalOptions",required:!1,type:{name:"TooltipPortalProps"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:'Omit<TooltipContentProps, "side" | "align">'}}}}}catch{}const at={title:"UI/Tooltip",component:R},Z=e=>h.jsx("div",{style:{display:"flex",justifyContent:"center"},children:h.jsx(R,{...e,children:h.jsx(te,{size:"large",children:h.jsx(ee.InformationIcon,{})})})}),w=Z.bind(void 0);w.args={content:"This is a tooltip"};const P=Z.bind(void 0);P.args={content:h.jsx(h.Fragment,{children:"Never give up, Never lose hope. Always have faith, It allows you to cope. Trying times will pass, As they always do. Just have patience, Your dreams will come true. So put on a smile, You`ll live through your pain. Know it will pass, And strength you will gain"})};var V,F,B;w.parameters={...w.parameters,docs:{...(V=w.parameters)==null?void 0:V.docs,source:{originalSource:"Template.bind(undefined)",...(B=(F=w.parameters)==null?void 0:F.docs)==null?void 0:B.source}}};var Y,K,z;P.parameters={...P.parameters,docs:{...(Y=P.parameters)==null?void 0:Y.docs,source:{originalSource:"Template.bind(undefined)",...(z=(K=P.parameters)==null?void 0:K.docs)==null?void 0:z.source}}};const ct=["Default","LongContent"];export{w as Default,P as LongContent,ct as __namedExportsOrder,at as default};
//# sourceMappingURL=tooltip.stories-d3f3c2bc.js.map
