import{j as d}from"./jsx-runtime-ffb262ed.js";import{a as D,i as T}from"./vanilla-extract-dynamic.esm-22503a8d.js";import{$ as R,a as $,_ as A,b as B,c as z}from"./index-44efca5e.js";import{r}from"./index-76fb7be0.js";import{c as F}from"./clsx-1229b3e0.js";import"./_commonjsHelpers-de833af9.js";import"./index-d3ea75b5.js";const j="Avatar",[H,ge]=R(j),[W,q]=H(j),O=r.forwardRef((e,l)=>{const{__scopeAvatar:t,...a}=e,[o,s]=r.useState("idle");return r.createElement(W,{scope:t,imageLoadingStatus:o,onImageLoadingStatusChange:s},r.createElement($.span,A({},a,{ref:l})))}),U="AvatarImage",G=r.forwardRef((e,l)=>{const{__scopeAvatar:t,src:a,onLoadingStatusChange:o=()=>{},...s}=e,c=q(U,t),n=X(a),i=B(b=>{o(b),c.onImageLoadingStatusChange(b)});return z(()=>{n!=="idle"&&i(n)},[n,i]),n==="loaded"?r.createElement($.img,A({},s,{ref:l,src:a})):null}),J="AvatarFallback",K=r.forwardRef((e,l)=>{const{__scopeAvatar:t,delayMs:a,...o}=e,s=q(J,t),[c,n]=r.useState(a===void 0);return r.useEffect(()=>{if(a!==void 0){const i=window.setTimeout(()=>n(!0),a);return()=>window.clearTimeout(i)}},[a]),c&&s.imageLoadingStatus!=="loaded"?r.createElement($.span,A({},o,{ref:l})):null});function X(e){const[l,t]=r.useState("idle");return r.useEffect(()=>{if(!e){t("error");return}let a=!0;const o=new window.Image,s=c=>()=>{a&&t(c)};return t("loading"),o.onload=s("loaded"),o.onerror=s("error"),o.src=e,()=>{a=!1}},[e]),l}const Q=O,Y=G,Z=K;var ee="_183bwcu6",ae="_183bwcu7",re="_183bwcu3",te="_183bwcu4",oe="_183bwcu5",se="_183bwcu8",ce="_183bwcub",le="_183bwcua",ne="_183bwcu9",de="var(--_183bwcu0)";const x=[["#FF0000","#FF00E5","#FFAE73"],["#FF5C00","#FFC700","#FFE073"],["#FFDA16","#FFFBA6","#FFBE73"],["#8CD317","#FCFF5C","#67CAE9"],["#28E19F","#89FFC6","#39A880"],["#35B7E0","#77FFCE","#5076FF"],["#3D39FF","#77BEFF","#3502FF"],["#BD08EB","#755FFF","#6967E4"]],_=({char:e})=>{const l=r.useMemo(()=>{const i=e.toUpperCase().charCodeAt(0);return x[i%x.length]},[e]),t=r.useRef(),[a,o,s]=l,[c,n]=r.useState(!1);return d.jsxs("div",{className:re,onMouseEnter:()=>{t.current=setTimeout(()=>{n(!0)},300)},onMouseLeave:()=>{clearTimeout(t.current),n(!1)},children:[d.jsx("div",{className:se,style:{background:s}}),d.jsx("div",{className:F(te,{[oe]:c}),style:{background:o}}),d.jsx("div",{className:F(ee,{[ae]:c}),style:{background:a}})]})};try{_.displayName="ColorfulFallback",_.__docgenInfo={description:"",displayName:"ColorfulFallback",props:{char:{defaultValue:null,description:"",name:"char",required:!0,type:{name:"string"}}}}}catch{}try{colorfulfallback.displayName="colorfulfallback",colorfulfallback.__docgenInfo={description:"",displayName:"colorfulfallback",props:{char:{defaultValue:null,description:"",name:"char",required:!0,type:{name:"string"}}}}}catch{}const v=({size:e=20,style:l={},url:t,name:a,className:o,colorfulFallback:s=!1,hoverIcon:c,fallbackProps:n,imageProps:i,avatarProps:b})=>{const y=r.useMemo(()=>(a==null?void 0:a.slice(0,1))||"A",[a]);return d.jsxs(Q,{style:{...D({[de]:e?`${e}px`:"20px"}),...l},className:F(ne,o,{"with-hover":c}),...b,children:[d.jsx(Y,{className:le,src:t||"",alt:a,...i}),d.jsx(Z,{className:ce,delayMs:600,...n,children:s?d.jsx(_,{char:y}):y}),c?d.jsx("div",{className:"hover-wrapper",children:c}):null]})};try{v.displayName="Avatar",v.__docgenInfo={description:"",displayName:"Avatar",props:{size:{defaultValue:{value:"20"},description:"",name:"size",required:!1,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string | null"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},colorfulFallback:{defaultValue:{value:"false"},description:"",name:"colorfulFallback",required:!1,type:{name:"boolean"}},hoverIcon:{defaultValue:null,description:"",name:"hoverIcon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},fallbackProps:{defaultValue:null,description:"",name:"fallbackProps",required:!1,type:{name:'Omit<AvatarFallbackProps, "className" | "style">'}},imageProps:{defaultValue:null,description:"",name:"imageProps",required:!1,type:{name:'Omit<AvatarImageProps, "src">'}},avatarProps:{defaultValue:null,description:"",name:"avatarProps",required:!1,type:{name:"AvatarProps"}}}}}catch{}const Fe={title:"UI/Avatar",component:v,argTypes:{onClick:()=>console.log("Click button")}},g=e=>d.jsx(v,{...e}),u=g.bind(void 0);u.args={name:"AFFiNE",url:"https://affine.pro/favicon-96.png",size:50};const m=g.bind(void 0);m.args={name:"AFFiNE",size:50};const p=g.bind(void 0);p.args={size:50,colorfulFallback:!0,name:"blocksuite"};const f=g.bind(void 0);f.args={size:50,colorfulFallback:!0,name:"With Hover",hoverIcon:d.jsx(T.CameraIcon,{})};var C,S,h;u.parameters={...u.parameters,docs:{...(C=u.parameters)==null?void 0:C.docs,source:{originalSource:"Template.bind(undefined)",...(h=(S=u.parameters)==null?void 0:S.docs)==null?void 0:h.source}}};var E,k,I;m.parameters={...m.parameters,docs:{...(E=m.parameters)==null?void 0:E.docs,source:{originalSource:"Template.bind(undefined)",...(I=(k=m.parameters)==null?void 0:k.docs)==null?void 0:I.source}}};var N,w,L;p.parameters={...p.parameters,docs:{...(N=p.parameters)==null?void 0:N.docs,source:{originalSource:"Template.bind(undefined)",...(L=(w=p.parameters)==null?void 0:w.docs)==null?void 0:L.source}}};var V,M,P;f.parameters={...f.parameters,docs:{...(V=f.parameters)==null?void 0:V.docs,source:{originalSource:"Template.bind(undefined)",...(P=(M=f.parameters)==null?void 0:M.docs)==null?void 0:P.source}}};const _e=["DefaultAvatar","Fallback","ColorfulFallback","WithHover"];export{p as ColorfulFallback,u as DefaultAvatar,m as Fallback,f as WithHover,_e as __namedExportsOrder,Fe as default};
//# sourceMappingURL=avatar.stories-20a27ec9.js.map
