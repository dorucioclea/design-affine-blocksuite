import{j as a}from"./jsx-runtime-ffb262ed.js";import{d as X,$ as x,_ as y,c as Q,b as Y}from"./index-0e277dcf.js";import{r as t}from"./index-76fb7be0.js";import{a as ee}from"./vanilla-extract-dynamic.esm-c334c93f.js";import{c as _}from"./clsx-1229b3e0.js";import"./button-98c09768.js";import{I as ae}from"./icon-button-e279f33b.js";import{T as re}from"./tooltip-89498129.js";import"./index-d3ea75b5.js";import"./_commonjsHelpers-de833af9.js";import"./style.css-8d70dfc7.js";import"./index-632cfda8.js";import"./index-6272fcf0.js";const A=e=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"none",style:{userSelect:"none",flexShrink:0},...e,children:a.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.285 5.75c-.35 0-.67.172-.858.45l-.723 1.066a2.535 2.535 0 0 1-2.1 1.109h-.826c-.579 0-1.028.459-1.028 1v7.875c0 .541.449 1 1.028 1h12.444c.579 0 1.028-.459 1.028-1V9.375c0-.541-.449-1-1.028-1h-.826c-.84 0-1.63-.413-2.1-1.109L14.573 6.2a1.035 1.035 0 0 0-.858-.45h-3.43Zm-2.1-.391a2.535 2.535 0 0 1 2.1-1.109h3.43c.84 0 1.63.413 2.1 1.109l.723 1.066c.188.278.509.45.858.45h.826c1.385 0 2.528 1.108 2.528 2.5v7.875c0 1.392-1.143 2.5-2.528 2.5H5.778c-1.385 0-2.528-1.108-2.528-2.5V9.375c0-1.392 1.143-2.5 2.528-2.5h.826c.349 0 .67-.172.858-.45l.723-1.066ZM12 11c-1.07 0-1.917.85-1.917 1.875 0 1.024.847 1.875 1.917 1.875s1.917-.85 1.917-1.875C13.917 11.851 13.07 11 12 11Zm-3.417 1.875C8.583 11 10.124 9.5 12 9.5s3.417 1.5 3.417 3.375S13.876 16.25 12 16.25s-3.417-1.5-3.417-3.375Z",clipRule:"evenodd"})}),te=e=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"none",style:{userSelect:"none",flexShrink:0},...e,children:a.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}),O="Avatar",[oe,Be]=X(O),[se,U]=oe(O),le=t.forwardRef((e,c)=>{const{__scopeAvatar:o,...r}=e,[s,l]=t.useState("idle");return t.createElement(se,{scope:o,imageLoadingStatus:s,onImageLoadingStatusChange:l},t.createElement(x.span,y({},r,{ref:c})))}),ce="AvatarImage",ne=t.forwardRef((e,c)=>{const{__scopeAvatar:o,src:r,onLoadingStatusChange:s=()=>{},...l}=e,n=U(ce,o),i=ue(r),d=Q(F=>{s(F),n.onImageLoadingStatusChange(F)});return Y(()=>{i!=="idle"&&d(i)},[i,d]),i==="loaded"?t.createElement(x.img,y({},l,{ref:c,src:r})):null}),ie="AvatarFallback",de=t.forwardRef((e,c)=>{const{__scopeAvatar:o,delayMs:r,...s}=e,l=U(ie,o),[n,i]=t.useState(r===void 0);return t.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>i(!0),r);return()=>window.clearTimeout(d)}},[r]),n&&l.imageLoadingStatus!=="loaded"?t.createElement(x.span,y({},s,{ref:c})):null});function ue(e){const[c,o]=t.useState("idle");return t.useEffect(()=>{if(!e){o("error");return}let r=!0;const s=new window.Image,l=n=>()=>{r&&o(n)};return o("loading"),s.onload=l("loaded"),s.onerror=l("error"),s.src=e,()=>{r=!1}},[e]),c}const me=le,pe=ne,fe=de;var ve="_183bwcu6",be="_183bwcu7",ge="_183bwcu3",he="_183bwcu4",Fe="_183bwcu5",_e="_183bwcu8",$e="_183bwcub",xe="_183bwcua",ye="_183bwcu9",Ae="_183bwcuc",Se="_183bwcud",Ce="var(--_183bwcu0)";const w=[["#FF0000","#FF00E5","#FFAE73"],["#FF5C00","#FFC700","#FFE073"],["#FFDA16","#FFFBA6","#FFBE73"],["#8CD317","#FCFF5C","#67CAE9"],["#28E19F","#89FFC6","#39A880"],["#35B7E0","#77FFCE","#5076FF"],["#3D39FF","#77BEFF","#3502FF"],["#BD08EB","#755FFF","#6967E4"]],$=({char:e})=>{const c=t.useMemo(()=>{const d=e.toUpperCase().charCodeAt(0);return w[d%w.length]},[e]),o=t.useRef(),[r,s,l]=c,[n,i]=t.useState(!1);return a.jsxs("div",{className:ge,onMouseEnter:()=>{o.current=setTimeout(()=>{i(!0)},300)},onMouseLeave:()=>{clearTimeout(o.current),i(!1)},children:[a.jsx("div",{className:_e,style:{background:l}}),a.jsx("div",{className:_(he,{[Fe]:n}),style:{background:s}}),a.jsx("div",{className:_(ve,{[be]:n}),style:{background:r}})]})};try{$.displayName="ColorfulFallback",$.__docgenInfo={description:"",displayName:"ColorfulFallback",props:{char:{defaultValue:null,description:"",name:"char",required:!0,type:{name:"string"}}}}}catch{}try{colorfulfallback.displayName="colorfulfallback",colorfulfallback.__docgenInfo={description:"",displayName:"colorfulfallback",props:{char:{defaultValue:null,description:"",name:"char",required:!0,type:{name:"string"}}}}}catch{}const u=t.forwardRef(({size:e=20,style:c={},url:o,name:r,className:s,colorfulFallback:l=!1,hoverIcon:n,fallbackProps:i,imageProps:d,avatarProps:F,onRemove:S,hoverWrapperProps:G={},...J},K)=>{const C=t.useMemo(()=>(r==null?void 0:r.slice(0,1))||"A",[r]);return a.jsxs(me,{style:{...ee({[Ce]:e?`${e}px`:"20px"}),...c},className:_(ye,s),...F,...J,ref:K,children:[a.jsx(pe,{className:xe,src:o||"",alt:r,...d}),a.jsx(fe,{className:$e,delayMs:600,...i,children:l?a.jsx($,{char:C}):C}),n?a.jsx("div",{className:Ae,...G,children:n}):null,S?a.jsx(ae,{size:"extraSmall",withoutHoverStyle:!0,type:"default",className:Se,onClick:S,children:a.jsx(te,{})}):null]})});u.displayName="Avatar";try{u.displayName="Avatar",u.__docgenInfo={description:"",displayName:"Avatar",props:{size:{defaultValue:{value:"20"},description:"",name:"size",required:!1,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string | null"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},colorfulFallback:{defaultValue:{value:"false"},description:"",name:"colorfulFallback",required:!1,type:{name:"boolean"}},hoverIcon:{defaultValue:null,description:"",name:"hoverIcon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"((e: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},fallbackProps:{defaultValue:null,description:"",name:"fallbackProps",required:!1,type:{name:'Omit<AvatarFallbackProps, "className" | "style">'}},imageProps:{defaultValue:null,description:"",name:"imageProps",required:!1,type:{name:'Omit<AvatarImageProps, "src">'}},avatarProps:{defaultValue:null,description:"",name:"avatarProps",required:!1,type:{name:"AvatarProps"}},hoverWrapperProps:{defaultValue:{value:"{}"},description:"",name:"hoverWrapperProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}}}}}catch{}const De={title:"UI/Avatar",component:u,argTypes:{onClick:()=>console.log("Click button")}},h=e=>a.jsx(u,{...e}),m=h.bind(void 0);m.args={name:"AFFiNE",url:"https://affine.pro/favicon-96.png",size:50};const p=h.bind(void 0);p.args={name:"AFFiNE",size:50};const f=h.bind(void 0);f.args={size:50,colorfulFallback:!0,name:"blocksuite"};const v=h.bind(void 0);v.args={size:50,colorfulFallback:!0,name:"With Hover",hoverIcon:a.jsx(A,{})};const we=e=>a.jsx(re,{content:"pop some thing",children:a.jsx(u,{...e})}),b=we.bind(void 0);b.args={size:50,colorfulFallback:!0,name:"With Hover",hoverIcon:a.jsx(A,{})};const g=h.bind(void 0);g.args={size:50,colorfulFallback:!0,name:"With Hover",hoverIcon:a.jsx(A,{}),onRemove:e=>{console.log("on remove",e)}};var E,k,I;m.parameters={...m.parameters,docs:{...(E=m.parameters)==null?void 0:E.docs,source:{originalSource:"Template.bind(undefined)",...(I=(k=m.parameters)==null?void 0:k.docs)==null?void 0:I.source}}};var N,T,j;p.parameters={...p.parameters,docs:{...(N=p.parameters)==null?void 0:N.docs,source:{originalSource:"Template.bind(undefined)",...(j=(T=p.parameters)==null?void 0:T.docs)==null?void 0:j.source}}};var L,M,R;f.parameters={...f.parameters,docs:{...(L=f.parameters)==null?void 0:L.docs,source:{originalSource:"Template.bind(undefined)",...(R=(M=f.parameters)==null?void 0:M.docs)==null?void 0:R.source}}};var V,P,W;v.parameters={...v.parameters,docs:{...(V=v.parameters)==null?void 0:V.docs,source:{originalSource:"Template.bind(undefined)",...(W=(P=v.parameters)==null?void 0:P.docs)==null?void 0:W.source}}};var q,B,D;b.parameters={...b.parameters,docs:{...(q=b.parameters)==null?void 0:q.docs,source:{originalSource:"WithTooltipTemplate.bind(undefined)",...(D=(B=b.parameters)==null?void 0:B.docs)==null?void 0:D.source}}};var H,z,Z;g.parameters={...g.parameters,docs:{...(H=g.parameters)==null?void 0:H.docs,source:{originalSource:"Template.bind(undefined)",...(Z=(z=g.parameters)==null?void 0:z.docs)==null?void 0:Z.source}}};const He=["DefaultAvatar","Fallback","ColorfulFallback","WithHover","WithTooltip","WithRemove"];export{f as ColorfulFallback,m as DefaultAvatar,p as Fallback,v as WithHover,g as WithRemove,b as WithTooltip,He as __namedExportsOrder,De as default};
//# sourceMappingURL=avatar.stories-28a8d555.js.map
