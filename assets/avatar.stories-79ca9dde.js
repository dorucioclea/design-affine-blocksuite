import{j as r}from"./jsx-runtime-ffb262ed.js";import{a as oe,C as se,b as O}from"./vanilla-extract-dynamic.esm-69045f62.js";import{$ as le,c as y,_ as A,e as ne,d as ce}from"./index-249b4978.js";import{r as t}from"./index-76fb7be0.js";import{c as u}from"./clsx-1229b3e0.js";import"./button-cb37de74.js";import{I as ie}from"./icon-button-b7f93421.js";import{T as C}from"./tooltip-021bd7a5.js";import"./index-d3ea75b5.js";import"./_commonjsHelpers-de833af9.js";import"./style.css-6788c100.js";import"./index-20c503a8.js";import"./index-46d22cb5.js";import"./index-1d6df041.js";const W="Avatar",[de,Je]=le(W),[ue,H]=de(W),pe=t.forwardRef((e,n)=>{const{__scopeAvatar:o,...a}=e,[s,l]=t.useState("idle");return t.createElement(ue,{scope:o,imageLoadingStatus:s,onImageLoadingStatusChange:l},t.createElement(y.span,A({},a,{ref:n})))}),me="AvatarImage",fe=t.forwardRef((e,n)=>{const{__scopeAvatar:o,src:a,onLoadingStatusChange:s=()=>{},...l}=e,c=H(me,o),i=ge(a),d=ne(F=>{s(F),c.onImageLoadingStatusChange(F)});return ce(()=>{i!=="idle"&&d(i)},[i,d]),i==="loaded"?t.createElement(y.img,A({},l,{ref:n,src:a})):null}),ve="AvatarFallback",be=t.forwardRef((e,n)=>{const{__scopeAvatar:o,delayMs:a,...s}=e,l=H(ve,o),[c,i]=t.useState(a===void 0);return t.useEffect(()=>{if(a!==void 0){const d=window.setTimeout(()=>i(!0),a);return()=>window.clearTimeout(d)}},[a]),c&&l.imageLoadingStatus!=="loaded"?t.createElement(y.span,A({},s,{ref:n})):null});function ge(e){const[n,o]=t.useState("idle");return t.useEffect(()=>{if(!e){o("error");return}let a=!0;const s=new window.Image,l=c=>()=>{a&&o(c)};return o("loading"),s.onload=l("loaded"),s.onerror=l("error"),s.src=e,()=>{a=!1}},[e]),n}const _e=pe,Fe=fe,$e=be;var ye="_183bwcu6",Ae="_183bwcu7",he="_183bwcu3",xe="_183bwcu4",Ce="_183bwcu5",Se="_183bwcu8",Ee="_183bwcuc",ke="_183bwcub",Te="_183bwcu9",Ie="_183bwcua",Ne="_183bwcud",we="_183bwcue",Pe="var(--_183bwcu0)";const S=[["#FF0000","#FF00E5","#FFAE73"],["#FF5C00","#FFC700","#FFE073"],["#FFDA16","#FFFBA6","#FFBE73"],["#8CD317","#FCFF5C","#67CAE9"],["#28E19F","#89FFC6","#39A880"],["#35B7E0","#77FFCE","#5076FF"],["#3D39FF","#77BEFF","#3502FF"],["#BD08EB","#755FFF","#6967E4"]],$=({char:e})=>{const n=t.useMemo(()=>{const d=e.toUpperCase().charCodeAt(0);return S[d%S.length]},[e]),o=t.useRef(),[a,s,l]=n,[c,i]=t.useState(!1);return r.jsxs("div",{className:he,onMouseEnter:()=>{o.current=setTimeout(()=>{i(!0)},300)},onMouseLeave:()=>{clearTimeout(o.current),i(!1)},children:[r.jsx("div",{className:Se,style:{background:l}}),r.jsx("div",{className:u(xe,{[Ce]:c}),style:{background:s}}),r.jsx("div",{className:u(ye,{[Ae]:c}),style:{background:a}})]})};try{$.displayName="ColorfulFallback",$.__docgenInfo={description:"",displayName:"ColorfulFallback",props:{char:{defaultValue:null,description:"",name:"char",required:!0,type:{name:"string"}}}}}catch{}try{colorfulfallback.displayName="colorfulfallback",colorfulfallback.__docgenInfo={description:"",displayName:"colorfulfallback",props:{char:{defaultValue:null,description:"",name:"char",required:!0,type:{name:"string"}}}}}catch{}const g=t.forwardRef(({size:e=20,style:n={},url:o,name:a,className:s,colorfulFallback:l=!1,hoverIcon:c,fallbackProps:{className:i,...d}={},imageProps:F,avatarProps:z,onRemove:h,hoverWrapperProps:{className:U,...G}={},avatarTooltipOptions:J,removeTooltipOptions:K,removeButtonProps:{className:X,...Q}={},...Y},Z)=>{const x=t.useMemo(()=>(a==null?void 0:a.slice(0,1))||"A",[a]),[ee,ae]=t.useState(null),[te,re]=t.useState(null);return r.jsxs(_e,{className:Te,...z,ref:Z,children:[r.jsx(C,{portalOptions:{container:ee},...J,children:r.jsxs("div",{ref:ae,className:u(Ie,s),style:{...oe({[Pe]:e?`${e}px`:"20px"}),...n},...Y,children:[r.jsx(Fe,{className:ke,src:o||"",alt:a,...F}),r.jsx($e,{className:u(Ee,i),delayMs:600,...d,children:l?r.jsx($,{char:x}):x}),c?r.jsx("div",{className:u(Ne,U),...G,children:c}):null]})}),h?r.jsx(C,{portalOptions:{container:te},...K,children:r.jsx(ie,{size:"extraSmall",type:"default",className:u(we,X),onClick:h,ref:re,...Q,children:r.jsx(se,{})})}):null]})});g.displayName="Avatar";try{g.displayName="Avatar",g.__docgenInfo={description:"",displayName:"Avatar",props:{size:{defaultValue:{value:"20"},description:"",name:"size",required:!1,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string | null"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},colorfulFallback:{defaultValue:{value:"false"},description:"",name:"colorfulFallback",required:!1,type:{name:"boolean"}},hoverIcon:{defaultValue:null,description:"",name:"hoverIcon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"((e: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},avatarTooltipOptions:{defaultValue:null,description:"",name:"avatarTooltipOptions",required:!1,type:{name:'Omit<TooltipProps, "children">'}},removeTooltipOptions:{defaultValue:null,description:"",name:"removeTooltipOptions",required:!1,type:{name:'Omit<TooltipProps, "children">'}},fallbackProps:{defaultValue:null,description:"",name:"fallbackProps",required:!1,type:{name:"AvatarFallbackProps"}},imageProps:{defaultValue:null,description:"",name:"imageProps",required:!1,type:{name:'Omit<AvatarImageProps, "src">'}},avatarProps:{defaultValue:null,description:"",name:"avatarProps",required:!1,type:{name:"AvatarProps"}},hoverWrapperProps:{defaultValue:null,description:"",name:"hoverWrapperProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}},removeButtonProps:{defaultValue:null,description:"",name:"removeButtonProps",required:!1,type:{name:"HTMLAttributes<HTMLButtonElement>"}}}}}catch{}const Ke={title:"UI/Avatar",component:g,argTypes:{onClick:()=>console.log("Click button")}},_=e=>r.jsx(g,{...e}),p=_.bind(void 0);p.args={name:"AFFiNE",url:"https://affine.pro/favicon-96.png",size:50};const m=_.bind(void 0);m.args={name:"AFFiNE",size:50};const f=_.bind(void 0);f.args={size:50,colorfulFallback:!0,name:"blocksuite"};const v=_.bind(void 0);v.args={size:50,colorfulFallback:!0,name:"With Hover",hoverIcon:r.jsx(O,{})};const b=_.bind(void 0);b.args={size:50,colorfulFallback:!0,name:"With Hover",hoverIcon:r.jsx(O,{}),removeTooltipOptions:{content:"This is remove tooltip"},avatarTooltipOptions:{content:"This is avatar tooltip"},onRemove:e=>{console.log("on remove",e)}};var E,k,T;p.parameters={...p.parameters,docs:{...(E=p.parameters)==null?void 0:E.docs,source:{originalSource:"Template.bind(undefined)",...(T=(k=p.parameters)==null?void 0:k.docs)==null?void 0:T.source}}};var I,N,w;m.parameters={...m.parameters,docs:{...(I=m.parameters)==null?void 0:I.docs,source:{originalSource:"Template.bind(undefined)",...(w=(N=m.parameters)==null?void 0:N.docs)==null?void 0:w.source}}};var P,M,L;f.parameters={...f.parameters,docs:{...(P=f.parameters)==null?void 0:P.docs,source:{originalSource:"Template.bind(undefined)",...(L=(M=f.parameters)==null?void 0:M.docs)==null?void 0:L.source}}};var V,j,B;v.parameters={...v.parameters,docs:{...(V=v.parameters)==null?void 0:V.docs,source:{originalSource:"Template.bind(undefined)",...(B=(j=v.parameters)==null?void 0:j.docs)==null?void 0:B.source}}};var q,D,R;b.parameters={...b.parameters,docs:{...(q=b.parameters)==null?void 0:q.docs,source:{originalSource:"Template.bind(undefined)",...(R=(D=b.parameters)==null?void 0:D.docs)==null?void 0:R.source}}};const Xe=["DefaultAvatar","Fallback","ColorfulFallback","WithHover","WithRemove"];export{f as ColorfulFallback,p as DefaultAvatar,m as Fallback,v as WithHover,b as WithRemove,Xe as __namedExportsOrder,Ke as default};
//# sourceMappingURL=avatar.stories-79ca9dde.js.map
