import{j as s}from"./jsx-runtime-ffb262ed.js";import{d as D,$,_ as A,c as R,b as T}from"./index-be7a436d.js";import{r}from"./index-76fb7be0.js";import{a as B}from"./vanilla-extract-dynamic.esm-c334c93f.js";import{c as F}from"./clsx-1229b3e0.js";import"./index-d3ea75b5.js";import"./_commonjsHelpers-de833af9.js";const z=e=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"none",style:{userSelect:"none",flexShrink:0},...e,children:s.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.285 5.75c-.35 0-.67.172-.858.45l-.723 1.066a2.535 2.535 0 0 1-2.1 1.109h-.826c-.579 0-1.028.459-1.028 1v7.875c0 .541.449 1 1.028 1h12.444c.579 0 1.028-.459 1.028-1V9.375c0-.541-.449-1-1.028-1h-.826c-.84 0-1.63-.413-2.1-1.109L14.573 6.2a1.035 1.035 0 0 0-.858-.45h-3.43Zm-2.1-.391a2.535 2.535 0 0 1 2.1-1.109h3.43c.84 0 1.63.413 2.1 1.109l.723 1.066c.188.278.509.45.858.45h.826c1.385 0 2.528 1.108 2.528 2.5v7.875c0 1.392-1.143 2.5-2.528 2.5H5.778c-1.385 0-2.528-1.108-2.528-2.5V9.375c0-1.392 1.143-2.5 2.528-2.5h.826c.349 0 .67-.172.858-.45l.723-1.066ZM12 11c-1.07 0-1.917.85-1.917 1.875 0 1.024.847 1.875 1.917 1.875s1.917-.85 1.917-1.875C13.917 11.851 13.07 11 12 11Zm-3.417 1.875C8.583 11 10.124 9.5 12 9.5s3.417 1.5 3.417 3.375S13.876 16.25 12 16.25s-3.417-1.5-3.417-3.375Z",clipRule:"evenodd"})}),P="Avatar",[H,ge]=D(P),[W,q]=H(P),O=r.forwardRef((e,n)=>{const{__scopeAvatar:t,...a}=e,[o,c]=r.useState("idle");return r.createElement(W,{scope:t,imageLoadingStatus:o,onImageLoadingStatusChange:c},r.createElement($.span,A({},a,{ref:n})))}),Z="AvatarImage",U=r.forwardRef((e,n)=>{const{__scopeAvatar:t,src:a,onLoadingStatusChange:o=()=>{},...c}=e,l=q(Z,t),d=K(a),i=R(b=>{o(b),l.onImageLoadingStatusChange(b)});return T(()=>{d!=="idle"&&i(d)},[d,i]),d==="loaded"?r.createElement($.img,A({},c,{ref:n,src:a})):null}),G="AvatarFallback",J=r.forwardRef((e,n)=>{const{__scopeAvatar:t,delayMs:a,...o}=e,c=q(G,t),[l,d]=r.useState(a===void 0);return r.useEffect(()=>{if(a!==void 0){const i=window.setTimeout(()=>d(!0),a);return()=>window.clearTimeout(i)}},[a]),l&&c.imageLoadingStatus!=="loaded"?r.createElement($.span,A({},o,{ref:n})):null});function K(e){const[n,t]=r.useState("idle");return r.useEffect(()=>{if(!e){t("error");return}let a=!0;const o=new window.Image,c=l=>()=>{a&&t(l)};return t("loading"),o.onload=c("loaded"),o.onerror=c("error"),o.src=e,()=>{a=!1}},[e]),n}const X=O,Q=U,Y=J;var ee="_183bwcu6",ae="_183bwcu7",re="_183bwcu3",te="_183bwcu4",oe="_183bwcu5",se="_183bwcu8",ce="_183bwcub",le="_183bwcua",ne="_183bwcu9",de="var(--_183bwcu0)";const h=[["#FF0000","#FF00E5","#FFAE73"],["#FF5C00","#FFC700","#FFE073"],["#FFDA16","#FFFBA6","#FFBE73"],["#8CD317","#FCFF5C","#67CAE9"],["#28E19F","#89FFC6","#39A880"],["#35B7E0","#77FFCE","#5076FF"],["#3D39FF","#77BEFF","#3502FF"],["#BD08EB","#755FFF","#6967E4"]],_=({char:e})=>{const n=r.useMemo(()=>{const i=e.toUpperCase().charCodeAt(0);return h[i%h.length]},[e]),t=r.useRef(),[a,o,c]=n,[l,d]=r.useState(!1);return s.jsxs("div",{className:re,onMouseEnter:()=>{t.current=setTimeout(()=>{d(!0)},300)},onMouseLeave:()=>{clearTimeout(t.current),d(!1)},children:[s.jsx("div",{className:se,style:{background:c}}),s.jsx("div",{className:F(te,{[oe]:l}),style:{background:o}}),s.jsx("div",{className:F(ee,{[ae]:l}),style:{background:a}})]})};try{_.displayName="ColorfulFallback",_.__docgenInfo={description:"",displayName:"ColorfulFallback",props:{char:{defaultValue:null,description:"",name:"char",required:!0,type:{name:"string"}}}}}catch{}try{colorfulfallback.displayName="colorfulfallback",colorfulfallback.__docgenInfo={description:"",displayName:"colorfulfallback",props:{char:{defaultValue:null,description:"",name:"char",required:!0,type:{name:"string"}}}}}catch{}const v=({size:e=20,style:n={},url:t,name:a,className:o,colorfulFallback:c=!1,hoverIcon:l,fallbackProps:d,imageProps:i,avatarProps:b})=>{const y=r.useMemo(()=>(a==null?void 0:a.slice(0,1))||"A",[a]);return s.jsxs(X,{style:{...B({[de]:e?`${e}px`:"20px"}),...n},className:F(ne,o,{"with-hover":l}),...b,children:[s.jsx(Q,{className:le,src:t||"",alt:a,...i}),s.jsx(Y,{className:ce,delayMs:600,...d,children:c?s.jsx(_,{char:y}):y}),l?s.jsx("div",{className:"hover-wrapper",children:l}):null]})};try{v.displayName="Avatar",v.__docgenInfo={description:"",displayName:"Avatar",props:{size:{defaultValue:{value:"20"},description:"",name:"size",required:!1,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string | null"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},colorfulFallback:{defaultValue:{value:"false"},description:"",name:"colorfulFallback",required:!1,type:{name:"boolean"}},hoverIcon:{defaultValue:null,description:"",name:"hoverIcon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},fallbackProps:{defaultValue:null,description:"",name:"fallbackProps",required:!1,type:{name:'Omit<AvatarFallbackProps, "className" | "style">'}},imageProps:{defaultValue:null,description:"",name:"imageProps",required:!1,type:{name:'Omit<AvatarImageProps, "src">'}},avatarProps:{defaultValue:null,description:"",name:"avatarProps",required:!1,type:{name:"AvatarProps"}}}}}catch{}const Fe={title:"UI/Avatar",component:v,argTypes:{onClick:()=>console.log("Click button")}},g=e=>s.jsx(v,{...e}),u=g.bind(void 0);u.args={name:"AFFiNE",url:"https://affine.pro/favicon-96.png",size:50};const m=g.bind(void 0);m.args={name:"AFFiNE",size:50};const p=g.bind(void 0);p.args={size:50,colorfulFallback:!0,name:"blocksuite"};const f=g.bind(void 0);f.args={size:50,colorfulFallback:!0,name:"With Hover",hoverIcon:s.jsx(z,{})};var x,C,S;u.parameters={...u.parameters,docs:{...(x=u.parameters)==null?void 0:x.docs,source:{originalSource:"Template.bind(undefined)",...(S=(C=u.parameters)==null?void 0:C.docs)==null?void 0:S.source}}};var E,k,w;m.parameters={...m.parameters,docs:{...(E=m.parameters)==null?void 0:E.docs,source:{originalSource:"Template.bind(undefined)",...(w=(k=m.parameters)==null?void 0:k.docs)==null?void 0:w.source}}};var I,N,V;p.parameters={...p.parameters,docs:{...(I=p.parameters)==null?void 0:I.docs,source:{originalSource:"Template.bind(undefined)",...(V=(N=p.parameters)==null?void 0:N.docs)==null?void 0:V.source}}};var L,M,j;f.parameters={...f.parameters,docs:{...(L=f.parameters)==null?void 0:L.docs,source:{originalSource:"Template.bind(undefined)",...(j=(M=f.parameters)==null?void 0:M.docs)==null?void 0:j.source}}};const _e=["DefaultAvatar","Fallback","ColorfulFallback","WithHover"];export{p as ColorfulFallback,u as DefaultAvatar,m as Fallback,f as WithHover,_e as __namedExportsOrder,Fe as default};
//# sourceMappingURL=avatar.stories-90bafca0.js.map
