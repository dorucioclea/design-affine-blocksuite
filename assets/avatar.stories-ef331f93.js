import{j as r}from"./jsx-runtime-ffb262ed.js";import{a as Q,C as Y,b as A}from"./vanilla-extract-dynamic.esm-69045f62.js";import{T as Z}from"./tooltip-23e0d603.js";import{$ as ee,c as h,_ as x,e as ae,d as re}from"./index-249b4978.js";import{r as t}from"./index-76fb7be0.js";import{c as $}from"./clsx-1229b3e0.js";import"./button-cb37de74.js";import{I as te}from"./icon-button-b7f93421.js";import"./index-20c503a8.js";import"./index-d3ea75b5.js";import"./_commonjsHelpers-de833af9.js";import"./index-46d22cb5.js";import"./index-1d6df041.js";import"./style.css-6788c100.js";const U="Avatar",[oe,Be]=ee(U),[se,G]=oe(U),ce=t.forwardRef((e,l)=>{const{__scopeAvatar:o,...a}=e,[s,c]=t.useState("idle");return t.createElement(se,{scope:o,imageLoadingStatus:s,onImageLoadingStatusChange:c},t.createElement(h.span,x({},a,{ref:l})))}),le="AvatarImage",ne=t.forwardRef((e,l)=>{const{__scopeAvatar:o,src:a,onLoadingStatusChange:s=()=>{},...c}=e,n=G(le,o),i=ue(a),d=ae(_=>{s(_),n.onImageLoadingStatusChange(_)});return re(()=>{i!=="idle"&&d(i)},[i,d]),i==="loaded"?t.createElement(h.img,x({},c,{ref:l,src:a})):null}),ie="AvatarFallback",de=t.forwardRef((e,l)=>{const{__scopeAvatar:o,delayMs:a,...s}=e,c=G(ie,o),[n,i]=t.useState(a===void 0);return t.useEffect(()=>{if(a!==void 0){const d=window.setTimeout(()=>i(!0),a);return()=>window.clearTimeout(d)}},[a]),n&&c.imageLoadingStatus!=="loaded"?t.createElement(h.span,x({},s,{ref:l})):null});function ue(e){const[l,o]=t.useState("idle");return t.useEffect(()=>{if(!e){o("error");return}let a=!0;const s=new window.Image,c=n=>()=>{a&&o(n)};return o("loading"),s.onload=c("loaded"),s.onerror=c("error"),s.src=e,()=>{a=!1}},[e]),l}const me=ce,pe=ne,fe=de;var be="_183bwcu6",ve="_183bwcu7",ge="_183bwcu3",Fe="_183bwcu4",_e="_183bwcu5",$e="_183bwcu8",ye="_183bwcub",Ae="_183bwcua",he="_183bwcu9",xe="_183bwcuc",Ce="_183bwcud",Se="var(--_183bwcu0)";const E=[["#FF0000","#FF00E5","#FFAE73"],["#FF5C00","#FFC700","#FFE073"],["#FFDA16","#FFFBA6","#FFBE73"],["#8CD317","#FCFF5C","#67CAE9"],["#28E19F","#89FFC6","#39A880"],["#35B7E0","#77FFCE","#5076FF"],["#3D39FF","#77BEFF","#3502FF"],["#BD08EB","#755FFF","#6967E4"]],y=({char:e})=>{const l=t.useMemo(()=>{const d=e.toUpperCase().charCodeAt(0);return E[d%E.length]},[e]),o=t.useRef(),[a,s,c]=l,[n,i]=t.useState(!1);return r.jsxs("div",{className:ge,onMouseEnter:()=>{o.current=setTimeout(()=>{i(!0)},300)},onMouseLeave:()=>{clearTimeout(o.current),i(!1)},children:[r.jsx("div",{className:$e,style:{background:c}}),r.jsx("div",{className:$(Fe,{[_e]:n}),style:{background:s}}),r.jsx("div",{className:$(be,{[ve]:n}),style:{background:a}})]})};try{y.displayName="ColorfulFallback",y.__docgenInfo={description:"",displayName:"ColorfulFallback",props:{char:{defaultValue:null,description:"",name:"char",required:!0,type:{name:"string"}}}}}catch{}try{colorfulfallback.displayName="colorfulfallback",colorfulfallback.__docgenInfo={description:"",displayName:"colorfulfallback",props:{char:{defaultValue:null,description:"",name:"char",required:!0,type:{name:"string"}}}}}catch{}const u=t.forwardRef(({size:e=20,style:l={},url:o,name:a,className:s,colorfulFallback:c=!1,hoverIcon:n,fallbackProps:i,imageProps:d,avatarProps:_,onRemove:C,hoverWrapperProps:J={},...K},X)=>{const S=t.useMemo(()=>(a==null?void 0:a.slice(0,1))||"A",[a]);return r.jsxs(me,{style:{...Q({[Se]:e?`${e}px`:"20px"}),...l},className:$(he,s),..._,...K,ref:X,children:[r.jsx(pe,{className:Ae,src:o||"",alt:a,...d}),r.jsx(fe,{className:ye,delayMs:600,...i,children:c?r.jsx(y,{char:S}):S}),n?r.jsx("div",{className:xe,...J,children:n}):null,C?r.jsx(te,{size:"extraSmall",type:"default",className:Ce,onClick:C,children:r.jsx(Y,{})}):null]})});u.displayName="Avatar";try{u.displayName="Avatar",u.__docgenInfo={description:"",displayName:"Avatar",props:{size:{defaultValue:{value:"20"},description:"",name:"size",required:!1,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string | null"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},colorfulFallback:{defaultValue:{value:"false"},description:"",name:"colorfulFallback",required:!1,type:{name:"boolean"}},hoverIcon:{defaultValue:null,description:"",name:"hoverIcon",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"((e: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},fallbackProps:{defaultValue:null,description:"",name:"fallbackProps",required:!1,type:{name:'Omit<AvatarFallbackProps, "className" | "style">'}},imageProps:{defaultValue:null,description:"",name:"imageProps",required:!1,type:{name:'Omit<AvatarImageProps, "src">'}},avatarProps:{defaultValue:null,description:"",name:"avatarProps",required:!1,type:{name:"AvatarProps"}},hoverWrapperProps:{defaultValue:{value:"{}"},description:"",name:"hoverWrapperProps",required:!1,type:{name:"HTMLAttributes<HTMLDivElement>"}}}}}catch{}const He={title:"UI/Avatar",component:u,argTypes:{onClick:()=>console.log("Click button")}},F=e=>r.jsx(u,{...e}),m=F.bind(void 0);m.args={name:"AFFiNE",url:"https://affine.pro/favicon-96.png",size:50};const p=F.bind(void 0);p.args={name:"AFFiNE",size:50};const f=F.bind(void 0);f.args={size:50,colorfulFallback:!0,name:"blocksuite"};const b=F.bind(void 0);b.args={size:50,colorfulFallback:!0,name:"With Hover",hoverIcon:r.jsx(A,{})};const Ee=e=>r.jsx(Z,{content:"pop some thing",children:r.jsx(u,{...e})}),v=Ee.bind(void 0);v.args={size:50,colorfulFallback:!0,name:"With Hover",hoverIcon:r.jsx(A,{})};const g=F.bind(void 0);g.args={size:50,colorfulFallback:!0,name:"With Hover",hoverIcon:r.jsx(A,{}),onRemove:e=>{console.log("on remove",e)}};var k,I,N;m.parameters={...m.parameters,docs:{...(k=m.parameters)==null?void 0:k.docs,source:{originalSource:"Template.bind(undefined)",...(N=(I=m.parameters)==null?void 0:I.docs)==null?void 0:N.source}}};var T,w,j;p.parameters={...p.parameters,docs:{...(T=p.parameters)==null?void 0:T.docs,source:{originalSource:"Template.bind(undefined)",...(j=(w=p.parameters)==null?void 0:w.docs)==null?void 0:j.source}}};var M,L,V;f.parameters={...f.parameters,docs:{...(M=f.parameters)==null?void 0:M.docs,source:{originalSource:"Template.bind(undefined)",...(V=(L=f.parameters)==null?void 0:L.docs)==null?void 0:V.source}}};var P,W,R;b.parameters={...b.parameters,docs:{...(P=b.parameters)==null?void 0:P.docs,source:{originalSource:"Template.bind(undefined)",...(R=(W=b.parameters)==null?void 0:W.docs)==null?void 0:R.source}}};var q,D,B;v.parameters={...v.parameters,docs:{...(q=v.parameters)==null?void 0:q.docs,source:{originalSource:"WithTooltipTemplate.bind(undefined)",...(B=(D=v.parameters)==null?void 0:D.docs)==null?void 0:B.source}}};var H,z,O;g.parameters={...g.parameters,docs:{...(H=g.parameters)==null?void 0:H.docs,source:{originalSource:"Template.bind(undefined)",...(O=(z=g.parameters)==null?void 0:z.docs)==null?void 0:O.source}}};const ze=["DefaultAvatar","Fallback","ColorfulFallback","WithHover","WithTooltip","WithRemove"];export{f as ColorfulFallback,m as DefaultAvatar,p as Fallback,b as WithHover,g as WithRemove,v as WithTooltip,ze as __namedExportsOrder,He as default};
//# sourceMappingURL=avatar.stories-ef331f93.js.map
